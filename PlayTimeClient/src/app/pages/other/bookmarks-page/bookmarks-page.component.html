<link rel="stylesheet" href="//unpkg.com/xp.css">

<article class="windows_xp" style="overflow: hidden;">
    <div *ngIf="!mobileMode['MobileMode']">
        <section *ngFor="let bookmark of bookmarks" cdkDrag [cdkDragDisabled]="!isBlockDraggable">
            <div class="window window__tab" *ngIf="bookmark['Type'] === 'WinXP'"
                [ngStyle]="{ 'left': getDivById(bookmark['Id']).left + 'vw', 'top': getDivById(bookmark['Id']).top + 'vh', 'z-index': bookmark['Id'] + 3, 'width': getWindowSize(bookmark, '400px') }">
                <div class="title-bar" (mouseout)="isBlockDraggable=false" (mouseover)="isBlockDraggable=true">
                    <div class="title-bar-text">{{bookmark['Title']}}</div>
                    <div class="title-bar-controls">
                        <button aria-label="Minimize" (click)="toggleMinimisedWindow(bookmark)"></button>
                        <button aria-label="Maximize" (click)="devInfo(bookmark)"></button>
                        <button aria-label="Close" (click)="executeCommand(bookmark['CloseButton'], bookmark)"></button>
                    </div>
                </div>
                <div *ngIf="!bookmark['Minimised']" class="window-body">
                    <p *ngIf="bookmark['TopText']">{{bookmark['TopText']}}
                    </p>
                    <menu role="tablist" style="flex-wrap: wrap-reverse; display: flex;">
                        <button
                            [attr.aria-selected]="isActiveTab(tab['Id'], bookmark['Id'], bookmark) ? 'true' : 'false'"
                            aria-controls="music" *ngFor="let tab of bookmark['Tabs']"
                            (click)="setActiveTab(tab['Id'], bookmark)">{{tab['Title']}}</button>
                    </menu>
                    <article role="tabpanel" *ngIf="bookmark['Tabs'].length > 0">
                        <p *ngFor="let textArea of bookmark['Tabs'][bookmark['ActiveTabId']]['Text']"><a
                                *ngIf="textArea['Link']" href="{{textArea['Link']}}"
                                target="_blank">{{textArea['Text']}}</a><span
                                *ngIf="!textArea['Link']">{{textArea['Text']}}</span>
                        </p>
                        <fieldset *ngFor="let radioPanel of bookmark['Tabs'][bookmark['ActiveTabId']]['RadioButtons']">
                            <legend>{{radioPanel['BoxTitle']}}</legend>
                            <div class="field-row" *ngFor="let radioButton of radioPanel['Options']">
                                <input type="radio" name="fieldset-example2">
                                <label for="radio29">{{radioButton['Text']}}</label>
                            </div>
                        </fieldset>
                        <section class="field-row"
                            *ngFor="let button of bookmark['Tabs'][bookmark['ActiveTabId']]['Buttons']">
                            <button (click)="executeCommand(button, bookmark)">{{button['Text']}}</button>
                            <label>{{button['AfterText']}}</label>
                        </section>
                        <div *ngIf="bookmark['Tabs'][bookmark['ActiveTabId']]['InnerHTML']"
                            [innerHTML]="trustHTML(bookmark['Tabs'][bookmark['ActiveTabId']]['InnerHTML'])"></div>
                    </article>
                    <div *ngIf="bookmark['InnerHTML']" [innerHTML]="trustHTML(bookmark['InnerHTML'])"></div>
                    <div style="display: flex; align-items:center; column-gap: 1rem; margin-left: 1rem;"
                        *ngFor="let popup of bookmark['Popup']">
                        <img style="width: 25px; height: 25px;" src="{{popup['Img']}}" alt="">
                        <p>{{popup['Text']}}</p>
                    </div>
                    <section class="field-row" style="justify-content: flex-end">
                        <button *ngFor="let bottemButtons of bookmark['Buttons']"
                            (click)="executeCommand(bottemButtons, bookmark)">{{bottemButtons['Text']}}</button>
                    </section>
                </div>
            </div>
            <div class="window window__tab" *ngIf="bookmark['Type'] === 'Router'" style="overflow: hidden;"
                [ngStyle]="{ 'left': getDivById(bookmark['Id']).left + 'vw', 'top': getDivById(bookmark['Id']).top + 'vh', 'z-index': bookmark['Id'] + 3, 'width': getWindowSize(bookmark, '400px') }">
                <div class="title-bar" (mouseout)="isBlockDraggable=false" (mouseover)="isBlockDraggable=true">
                    <div style="display: flex; flex-direction: row;">
                        <img src="../../../../assets/icons/Internet.ico"
                            style="width: 18px; height: 18px; padding-top: 3px">
                        <div class="title-bar-text" style="padding-top: 5px;">
                            {{bookmark['Title']}}
                        </div>
                    </div>
                    <div class="title-bar-controls">
                        <button aria-label="Minimize" (click)="toggleMinimisedWindow(bookmark)"></button>
                        <button aria-label="Maximize" (click)="devInfo(bookmark)"></button>
                        <button aria-label="Close" (click)="executeCommand(bookmark['CloseButton'], bookmark)"></button>
                    </div>
                </div>
                <div *ngIf="!bookmark['Minimised']" class="window-body"
                    style="margin: 0px 3px 0px 3px; overflow: hidden; max-width: 100%;">
                    <div style="overflow: hidden; max-width: 100%;">
                        <header>
                            <button class="headerButton">File</button>
                            <button class="headerButton">Edit</button>
                            <button class="headerButton">View</button>
                            <button class="headerButton">Favorites</button>
                            <button class="headerButton">Tools</button>
                            <button class="headerButton">Help</button>
                            <button class="headerButton" *ngIf="!mobileMode['MobileUser']"
                                (click)="mobileMode['MobileMode'] = true">Mobile mode</button>
                        </header>
                        <hr class="solid no-top-margin">
                        <div></div>
                        <hr class="solid no-top-margin">
                        <div style="display: flex; flex-direction: row;">
                            <p style="margin: 0; padding: 8px; padding-top: 5px; padding-bottom: 4px;">Adress</p>
                            <select style="width: 100%;" [(ngModel)]="activePage">
                                <option value="https://www.google.com">Google</option>
                                <!-- Add more options as needed -->
                            </select>

                            <button (click)="switchPage(activePage)">Go</button>
                        </div>
                        <div class="webContent" *ngIf="showRouter">
                            <ng-content select="[pc]"></ng-content>
                        </div>
                        <div class="webContent" *ngIf="!showRouter">
                            <app-home-page></app-home-page>
                        </div>
                        <footer>
                            <div style="display: flex; flex-direction: row; justify-content: space-between;">
                                <p style="margin: 0; padding: 8px; padding-top: 5px; padding-bottom: 4px;">Done</p>
                                <div style="display: flex; flex-direction: row;">
                                    <img src="../../../../assets/icons/Internet.ico"
                                        style="width: 18px; height: 18px; padding-top: 3px">
                                    <p style="margin: 0; padding: 8px; padding-top: 5px; padding-bottom: 5px;">Internet
                                    </p>
                                </div>
                            </div>
                        </footer>
                    </div>


                </div>
            </div>
        </section>
    </div>
    <div *ngIf="mobileMode['MobileMode']" style="height: calc(100% - 35px); overflow: hidden;">
        <div class="window window__mobile" style="overflow: hidden; height: max-content;">
            <div class="title-bar">
                <div style="display: flex; flex-direction: row;">
                    <img src="../../../../assets/icons/Internet.ico"
                        style="width: 18px; height: 18px; padding-top: 3px">
                    <div class="title-bar-text" style="padding-top: 5px;">
                        placeholder
                    </div>
                </div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize"></button>
                    <button aria-label="Maximize"></button>
                    <button aria-label="Close"></button>
                </div>
            </div>
            <div class="window-body" style="margin: 0px 3px 0px 3px; overflow: hidden; max-width: 100%; height: 100%;">
                <div style="overflow: hidden; max-width: 100%; height: 100%;">
                    <header>
                        <button class="headerButton">File</button>
                        <button class="headerButton">Edit</button>
                        <button class="headerButton">View</button>
                        <button class="headerButton">Favorites</button>
                        <button class="headerButton">Tools</button>
                        <button class="headerButton">Help</button>
                        <button class="headerButton" *ngIf="!mobileMode['MobileUser']"
                            (click)="mobileMode['MobileMode'] = false">Mobile mode</button>
                    </header>
                    <hr class="solid no-top-margin">
                    <div></div>
                    <hr class="solid no-top-margin">
                    <div style="display: flex; flex-direction: row;">
                        <p style="margin: 0; padding: 8px; padding-top: 5px; padding-bottom: 4px;">Adress</p>
                        <select style="width: 100%;" [(ngModel)]="activePage">
                            <option value="https://www.google.com">Google</option>
                            <!-- Add more options as needed -->
                        </select>

                        <button (click)="switchPage(activePage)">Go</button>
                    </div>
                    <div class="webContent" *ngIf="showRouter">
                        <ng-content select="[mobile]"></ng-content>
                    </div>
                    <div class="webContent" *ngIf="!showRouter">
                        <app-home-page></app-home-page>
                    </div>
                    <footer>
                        <div style="display: flex; flex-direction: row; justify-content: space-between;">
                            <p style="margin: 0; padding: 8px; padding-top: 5px; padding-bottom: 4px;">Done</p>
                            <div style="display: flex; flex-direction: row;">
                                <img src="../../../../assets/icons/Internet.ico"
                                    style="width: 18px; height: 18px; padding-top: 3px">
                                <p style="margin: 0; padding: 8px; padding-top: 5px; padding-bottom: 5px;">Internet
                                </p>
                            </div>
                        </div>
                    </footer>
                </div>


            </div>
        </div>
    </div>
    <div style="height: 32px">
        <div class="taskbar">
            <button class="taskbar__start" (click)="routerNav(['Home'])">
                <img class="taskbar__start--logo" src="//i.imgur.com/PzXcMsP.png" alt="Windows">
                Home
            </button>
        </div>
    </div>
</article>